{
  "_fv": 18,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable type=\"MCItem\" id=\"stack\">stack</variable><variable type=\"Boolean\" id=\"keepInventory\">keepInventory</variable></variables><block type=\"event_trigger\" deletable=\"false\" x=\"40\" y=\"40\"><field name=\"trigger\">entity_dies</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityPlayerMP</field><value name=\"compareTo\"><block type=\"entity_from_deps\"></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set_logic\"><field name=\"VAR\">local:keepInventory</field><value name=\"VAL\"><block type=\"java_code_get\"><field name=\"CODE\">entity.world.getGameRules().getBoolean(\"keepInventory\")</field></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"entity_has_item_inventory\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Rinnegan.helmet</field></block></value></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">stack=ProcedureUtils.getItemStackIgnoreDurability(((EntityPlayer)entity).inventory, new ItemStack(ItemRinnegan.helmet));</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">stack.hasTagCompound() &amp;&amp; stack.getTagCompound().hasUniqueId(\"KoH_id\")</field></block></value><statement name=\"DO0\"><block type=\"entity_set_health\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"health\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value><next><block type=\"cancel_event\"></block></next></block></statement><value name=\"IF1\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"variables_get_logic\"><field name=\"VAR\">local:keepInventory</field></block></value></block></value><statement name=\"DO1\"><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Rinnegan.helmet</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></statement></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"entity_has_item_inventory\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Tenseigan.helmet</field></block></value></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">stack=ProcedureUtils.getItemStackIgnoreDurability(((EntityPlayer)entity).inventory, new ItemStack(ItemTenseigan.helmet));</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">stack.hasTagCompound() &amp;&amp; stack.getTagCompound().hasUniqueId(\"KoH_id\")</field></block></value><statement name=\"DO0\"><block type=\"entity_set_health\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"health\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value><next><block type=\"cancel_event\"></block></next></block></statement><value name=\"IF1\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"variables_get_logic\"><field name=\"VAR\">local:keepInventory</field></block></value></block></value><statement name=\"DO1\"><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Tenseigan.helmet</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></statement></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"entity_has_item_inventory\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:MangekyoSharinganEternal.helmet</field></block></value></block></value><value name=\"B\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"variables_get_logic\"><field name=\"VAR\">local:keepInventory</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:MangekyoSharinganEternal.helmet</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"entity_has_item_inventory\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Byakugan.helmet</field></block></value></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">stack=ProcedureUtils.getItemStackIgnoreDurability(((EntityPlayer)entity).inventory, new ItemStack(ItemByakugan.helmet));</field><next><block type=\"item_nbt_logic_set\"><value name=\"tagName\"><block type=\"variables_get_text\"><field name=\"VAR\">global:RINNESHARINGAN_ACTIVATED</field></block></value><value name=\"item\"><block type=\"variables_get_itemstack\"><field name=\"VAR\">local:stack</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:AsuraPathArmor.body</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"variables_get_logic\"><field name=\"VAR\">local:keepInventory</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">EntityBijuManager.isJinchuriki((EntityPlayer)entity)</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">EntityBijuManager.unsetPlayerAsJinchuriki((EntityPlayer)entity);</field></block></statement><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Mokuton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:EightGates</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Raiton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Futon</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Ninjutsu</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Doton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Yoton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Inton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Katon</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Jinton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Suiton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Bakuton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Hyoton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Jiton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Shakuton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Yooton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Ranton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Futton</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Shikotsumyaku</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Gourd.body</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:IryoJutsu</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">-1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Senjutsu</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"math_binary_ops\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"java_code_get\"><field name=\"CODE\">EntityBijuManager.cloakLevel((EntityPlayer)entity)</field></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">EntityBijuManager.toggleBijuCloak((EntityPlayer)entity);</field></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">entity.world.getGameRules().getBoolean(PlayerTracker.FORCE_DOJUTSU_DROP_RULE)</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">stack = ProcedureUtils.getMatchingItemStack((EntityPlayer)entity, ItemByakugan.helmet);</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">stack != null</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">((EntityPlayer)entity).dropItem(stack.copy(), true, true);</field><next><block type=\"itemstack_shrink\"><value name=\"item\"><block type=\"variables_get_itemstack\"><field name=\"VAR\">local:stack</field></block></value><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value></block></next></block></statement><next><block type=\"java_code\"><field name=\"CODE\">stack = ProcedureUtils.getMatchingItemStack((EntityPlayer)entity, ItemSharingan.helmet);</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">stack != null</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">((EntityPlayer)entity).dropItem(stack.copy(), true, true);</field><next><block type=\"itemstack_shrink\"><value name=\"item\"><block type=\"variables_get_itemstack\"><field name=\"VAR\">local:stack</field></block></value><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value></block></next></block></statement><next><block type=\"java_code\"><field name=\"CODE\">stack = ProcedureUtils.getMatchingItemStack((EntityPlayer)entity, ItemMangekyoSharingan.helmet);</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">stack != null</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">((EntityPlayer)entity).dropItem(stack.copy(), true, true);</field><next><block type=\"itemstack_shrink\"><value name=\"item\"><block type=\"variables_get_itemstack\"><field name=\"VAR\">local:stack</field></block></value><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value></block></next></block></statement><next><block type=\"java_code\"><field name=\"CODE\">stack = ProcedureUtils.getMatchingItemStack((EntityPlayer)entity, ItemMangekyoSharinganObito.helmet);</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">stack != null</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">((EntityPlayer)entity).dropItem(stack.copy(), true, true);</field><next><block type=\"itemstack_shrink\"><value name=\"item\"><block type=\"variables_get_itemstack\"><field name=\"VAR\">local:stack</field></block></value><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement><next><block type=\"java_code\"><field name=\"CODE\">ProcedureSync.EntityNBTTag.removeAndSync(entity, NarutomodModVariables.forceBowPose);</field><next><block type=\"entity_nbt_logic_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"variables_get_text\"><field name=\"VAR\">global:FirstGotNinjutsu</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"entity_nbt_logic_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">susanoo_activated</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"java_code\"><field name=\"CODE\">entity.getEntityData().setInteger(\"ForceExtinguish\", 5);</field><next><block type=\"java_code\"><field name=\"CODE\">entity.setNoGravity(false);</field></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block><block type=\"entity_has_item_inventory\" x=\"757\" y=\"2706\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Byakugan.helmet</field></block></value></block><block type=\"entity_has_item_inventory\" x=\"739\" y=\"2849\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:Sharingan.helmet</field></block></value></block><block type=\"entity_has_item_inventory\" x=\"740\" y=\"2978\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:MangekyoSharingan.helmet</field></block></value></block><block type=\"entity_has_item_inventory\" x=\"777\" y=\"3177\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:MangekyoSharinganObito.helmet</field></block></value></block><block type=\"controls_if\" x=\"84\" y=\"3548\"><value name=\"IF0\"><block type=\"java_code_get\"><field name=\"CODE\">entity instanceof EntityLivingBase</field></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">ProcedureUtils.clearDeathAnimations((EntityLivingBase)entity);</field></block></statement></block></xml>"
  }
}